<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escape Room Game</title>
    <link rel="stylesheet" href="styles.css"> <!-- CSS 파일 연결 -->
</head>
<body>
  <div id="introScreen">
    <h1>Escape Room</h1>
    <button id="startButton" onclick="startGame()">Start</button>
  </div>

  <div id="storyScreen">
    <p id="storyText">You are a detective...</p>
    <button id="nextButton" onclick="displayStory()">Next</button>
    <button id="skipButton" onclick="skipStory()">Skip</button>
    <button id="startRoomButton" onclick="startRoom()" style="display:none;">Start Room</button>
  </div>
    <!-- Timer Display -->


  <!-- Bad Ending Screen (Initially hidden) -->
  <div id="badEndingScreen" style="display:none;">
      <h2>Bad Ending</h2>
      <p id="badEndingMessage"></p>
      <button onclick="restartGame()">Restart</button> <!-- Optional restart functionality -->
  </div>

  <div id="roomScreen" style="display:none;">
    <h2>Explore the Room</h2>
    <div id="timerDisplay">60:00</div>
    <div class="roomObject" id="clueObject" onclick="findClue()">Click here to find a clue</div>
    <div class="roomObject" id="keyObject" onclick="findKey()">Click here to find a key</div>
    <!-- Door, Lock, and Second Key objects in the room -->
    <div class="roomObject" id="doorObject" onclick="findDoor()">Click here to interact with the door</div>
    <div class="roomObject" id="lockObject" onclick="findLock()">Click here to find a lock</div>
    <div class="roomObject" id="lockKeyObject" onclick="findSecondKey()">Click here to find a second key</div>
    
    <!-- Puzzle object -->
    <div class="roomObject" id="puzzleObject" onclick="showPuzzle()">Click here to find the puzzle</div>
    
    <div id="inventorySection" style="display:none;">
      <h2>Inventory</h2>
      <div id="inventoryDisplay"></div>
    </div>

    <!-- Hidden puzzle display -->
    <div id="puzzleScreen" style="display:none;">
        <h2>Puzzle</h2>
        <p>Solve the puzzle to unlock the hidden item.</p>
        <input id="puzzleInput" type="text" placeholder="Enter answer">
        <button id="submitPuzzleButton" onclick="submitPuzzle()">Submit Answer</button>
    </div>

    <div id="noteSection" style="display:none;">
      <h2>Notes</h2>
      <button onclick="createNote()">Create Note</button>
      <div id="noteContainer"></div>
    </div>

    <div id="iconBar">
      <img src="images/note_icon.png" id="noteIcon" onclick="toggleNote()" alt="Note Icon">
      <img src="images/hint_icon.png" id="hintIcon" onclick="showHintPopup()" alt="Hint Icon">
      <img src="images/inventory_icon.png" id="inventoryIcon" onclick="toggleInventory()" alt="Inventory Icon">
    </div>


    <div id="hintSection" style="display:none;">
      <h2>Hints</h2>
      <button onclick="useHint()">Use Hint</button>
    </div>

    <div id="popupOverlay" class="overlay" style="display:none;"></div>
    <!-- Hint Popup -->
    <div id="hintPopup" class="popup" style="display:none;">
      <div class="popupContent">
          <h2 id="hintTitle">Request a Hint</h2>
          <p id="hintMessage">Enter the name of the puzzle for which you need a hint:</p>
          <input id="puzzleNameInput" type="text" placeholder="Puzzle name">
          <button id="getHintButton" onclick="getHint()">Get Hint</button>
          <button onclick="closeHintPopup()">Close</button>

          <p id="hintStatus">Hints remaining: 3</p> <!-- Display remaining hints -->

          <div id="previousHintsSection">
              <h3>Previously Viewed Hints</h3>
              <select id="previousHintsDropdown">
                  <option value="">Select a hint</option>
              </select>
          </div>

          <!-- Previous hint display section -->
          <p id="previousHintDisplay" style="font-size: 14px; color: #555;"></p>
      </div>
    </div>

    <!-- Item Popup (Initially hidden) -->
    <div id="itemPopup" class="popup" style="display:none;">
      <div class="popupContent">
          <h2 id="itemPopupTitle">Item Name</h2>
          <img id="itemPopupImage" src="" alt="Item Image">
          <p id="itemPopupDescription">Item description here...</p>
          <button onclick="closeItemPopup()">Close</button>
      </div>
    </div>

    <!-- Acquisition Popup (Initially hidden) -->
    <div id="acquisitionPopup" class="popup" style="display:none;">
      <div class="popupContent">
          <h2 id="acquisitionPopupTitle">Item Acquired</h2>
          <img id="acquisitionPopupImage" src="" alt="Item Image" style="max-width:100%;">
          <button onclick="closeAcquisitionPopup()">Close</button>
      </div>
    </div>
  </div>

  <script src="hintSystem.js"></script>
  <script src="story.js"></script>
  <script src="inventory.js"></script>
  <script src="notepad.js"></script>
  <script src="objectInteract.js"></script>
  <script src="game.js"></script>
  <script src="note.js"></script>
</body>
</html>